#Description: IntelÂ® Rapid Storage Technology (AHCI)
language: go
go: 1.11.x

before_script:
  - mkdir -p GetDir
  - cd GetDir && curl -fsSL https://raw.githubusercontent.com/m3t/travis_wait/master/travis_wait > travis_wait.sh
  - set -e
  - wget -nv -nc https://downloadmirror.intel.com/23295/eng/STOR_Win7_XP_11.2.0.1006.exe && cd ..
  - curl -fsSL https://gist.githubusercontent.com/stefanbuck/ce788fee19ab6eb0b4447a85fc99f447/raw/dbadd7d310ce8446de89c4ffdf1db0b400d0f6c3/upload-github-release-asset.sh > upload.sh
  - mv GetDir/travis_wait.sh .
  - ls -la GetDir
  - ls -la
  
branches:
  except:
  - master
  
deploy:
  provider: script
  script: for f in $(ls $TRAVIS_BUILD_DIR/GetDir) ; do echo $f && bash ./upload.sh github_api_token=$GITHUB_API_KEY owner=opensourcer2 repo=openbinary tag=intel-AHCI filename=$f; done
  skip_cleanup: true
  on:
    all_branches: true
  
#cache:
#  directories:
#   - ./GetDir/

